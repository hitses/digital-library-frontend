<div class="mx-auto max-w-2xl">
  <h2 class="mb-6 text-2xl font-bold text-gray-800">Cambiar Contraseña</h2>
  <p class="mb-6 text-gray-600">
    Es necesario actualizar tu contraseña para continuar usando el sistema.
  </p>

  <!-- Feedback visual -->
  @if (statusMessage(); as msg) {
    <div
      class="mb-4 rounded p-4 text-sm font-medium"
      [class.bg-green-100]="msg.type === 'success'"
      [class.text-green-800]="msg.type === 'success'"
      [class.bg-red-100]="msg.type === 'error'"
      [class.text-red-800]="msg.type === 'error'"
    >
      {{ msg.text }}
    </div>
  }

  <form
    [formGroup]="passwordForm"
    (ngSubmit)="onSubmit()"
    class="space-y-6 rounded-lg bg-white p-6 shadow-md"
  >
    <!-- Mismo formulario que antes -->
    <div>
      <label for="current" class="block text-sm font-medium text-gray-700">Contraseña Actual</label>
      <input
        id="current"
        type="password"
        formControlName="currentPassword"
        class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
      />
      @if (currentPasswordError) {
        <p class="mt-1 text-sm text-red-600">Requerido.</p>
      }
    </div>

    <div>
      <label for="new" class="block text-sm font-medium text-gray-700">Nueva Contraseña</label>
      <input
        id="new"
        type="password"
        formControlName="newPassword"
        class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
      />
      @if (newPasswordError) {
        <p class="mt-1 text-sm text-red-600">Mínimo 8 caracteres.</p>
      }
    </div>

    <div>
      <label for="confirm" class="block text-sm font-medium text-gray-700">Confirmar Nueva</label>
      <input
        id="confirm"
        type="password"
        formControlName="confirmPassword"
        class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
      />
      @if (confirmPasswordError) {
        <p class="mt-1 text-sm text-red-600">No coinciden.</p>
      }
    </div>

    <div class="flex justify-end">
      <button
        type="submit"
        [disabled]="isLoading()"
        class="rounded-md bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-700 disabled:opacity-50"
      >
        {{ isLoading() ? 'Guardando...' : 'Actualizar' }}
      </button>
    </div>
  </form>
</div>
