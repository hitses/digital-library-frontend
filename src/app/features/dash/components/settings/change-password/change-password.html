<section class="flex items-center justify-center p-4 transition-colors duration-200">
  <div class="relative w-full max-w-2xl">
    <div class="overflow-hidden">
      <div class="overflow-hidden bg-white p-10 dark:bg-slate-950/0">
        <h1 class="mb-8 text-3xl font-bold text-slate-800 dark:text-white">Cambiar contraseña</h1>

        <form class="space-y-6" [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
          <div>
            <div class="relative">
              <input
                [type]="showCurrent() ? 'text' : 'password'"
                formControlName="currentPassword"
                placeholder=" "
                class="peer w-full rounded-lg border border-slate-300 bg-transparent px-3 pt-5 pr-10 pb-2 text-sm text-slate-900 focus:border-blue-600 focus:ring-0 focus:outline-none dark:border-slate-700 dark:text-white dark:focus:border-blue-500"
              />

              <label
                class="pointer-events-none absolute top-2 left-3 text-sm text-slate-500 transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-slate-400 peer-focus:top-1 peer-focus:text-xs peer-focus:text-blue-600 dark:text-slate-400 dark:peer-focus:text-blue-400"
              >
                Contraseña actual
              </label>

              <button
                type="button"
                (click)="toggleCurrent()"
                class="absolute top-1/2 right-3 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"
                tabindex="-1"
              >
                @if (showCurrent()) {
                  <closed-eye-icon />
                } @else {
                  <eye-icon />
                }
              </button>
            </div>

            @if (currentPasswordError) {
              <p class="mt-1 text-xs text-red-600 dark:text-red-400">
                La contraseña antigua es obligatoria
              </p>
            }
          </div>

          <div>
            <div class="relative">
              <input
                [type]="showNew() ? 'text' : 'password'"
                formControlName="newPassword"
                placeholder=" "
                class="peer w-full rounded-lg border border-slate-300 bg-transparent px-3 pt-5 pr-10 pb-2 text-sm text-slate-900 focus:border-blue-600 focus:ring-0 focus:outline-none dark:border-slate-700 dark:text-white dark:focus:border-blue-500"
              />

              <label
                class="pointer-events-none absolute top-2 left-3 text-sm text-slate-500 transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-slate-400 peer-focus:top-1 peer-focus:text-xs peer-focus:text-blue-600 dark:text-slate-400 dark:peer-focus:text-blue-400"
              >
                Nueva contraseña
              </label>

              <button
                type="button"
                (click)="toggleNew()"
                class="absolute top-1/2 right-3 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"
                tabindex="-1"
              >
                @if (showNew()) {
                  <closed-eye-icon />
                } @else {
                  <eye-icon />
                }
              </button>
            </div>

            @if (newPasswordError) {
              <p class="mt-1 text-xs text-red-600 dark:text-red-400">
                Mínimo 8 caracteres, con mayúscula, minúscula y número
              </p>
            }
          </div>

          <div>
            <div class="relative">
              <input
                [type]="showConfirm() ? 'text' : 'password'"
                formControlName="confirmPassword"
                placeholder=" "
                class="peer w-full rounded-lg border border-slate-300 bg-transparent px-3 pt-5 pr-10 pb-2 text-sm text-slate-900 focus:border-blue-600 focus:ring-0 focus:outline-none dark:border-slate-700 dark:text-white dark:focus:border-blue-500"
              />

              <label
                class="pointer-events-none absolute top-2 left-3 text-sm text-slate-500 transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-slate-400 peer-focus:top-1 peer-focus:text-xs peer-focus:text-blue-600 dark:text-slate-400 dark:peer-focus:text-blue-400"
              >
                Confirmar nueva contraseña
              </label>

              <button
                type="button"
                (click)="toggleConfirm()"
                class="absolute top-1/2 right-3 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"
                tabindex="-1"
              >
                @if (showConfirm()) {
                  <closed-eye-icon />
                } @else {
                  <eye-icon />
                }
              </button>
            </div>

            @if (confirmPasswordError) {
              <p class="mt-1 text-xs text-red-600 dark:text-red-400">
                Las contraseñas nuevas no coinciden
              </p>
            }
          </div>

          <button
            type="submit"
            class="w-full rounded-lg py-3 text-sm font-medium transition-colors duration-200"
            [class]="
              isSubmitDisabled
                ? 'cursor-not-allowed bg-gray-300 text-gray-500 dark:bg-slate-800 dark:text-slate-500'
                : 'cursor-pointer bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-500'
            "
            [disabled]="isSubmitDisabled"
          >
            {{ isLoading() ? 'Guardando...' : 'Actualizar contraseña' }}
          </button>
        </form>
      </div>
    </div>
  </div>
</section>
